<!DOCTYPE html>
<html lang="es"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
  <title>Resumen de Pedido  </title>
</head>

<div layout:fragment="content" class="content-wrapper">
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>Resumen del Pedido</h1>
        </div>
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a th:href="@{/}">Inicio</a></li>
            <li class="breadcrumb-item active">Resumen</li>
          </ol>
        </div>
      </div>
    </div>
  </section>

  <section class="content">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">

          <div class="invoice p-3 mb-3">

            <div class="row">
              <div class="col-12">
                <h4>
                  <i class="fas fa-store"></i> Tienda Erik S.A.C.
                  <small class="float-right">Fecha: <span th:text="${#dates.format(pedido.fecha, 'dd/MM/yyyy')}"></span></small>
                </h4>
              </div>
            </div>

            <div class="row invoice-info mt-3">
              <div class="col-sm-4 invoice-col">
                Cliente
                <address>
                  <strong th:text="${pedido.cliente.nombres_razonsocial}">Nombre</strong><br>
                  <span th:text="'Doc: ' + ${pedido.cliente.tipo_documento.valor} + ' ' + ${pedido.cliente.numeroDocumento}"></span><br>
                  <span th:text="${pedido.cliente.direccion}"></span><br>
                  <span th:text="${pedido.cliente.telefono}"></span>
                </address>
              </div>

              <div class="col-sm-4 invoice-col">
                Pago
                <address th:if="${pedido.pago != null}">
                  <strong th:text="'Método: ' + ${pedido.pago.metodoPago.valor}"></strong><br>
                  <span th:text="'Estado: ' + ${pedido.pago.estadoPago.valor}"></span><br>
                  <span th:text="'Referencia: ' + ${pedido.pago.referencia}"></span><br>
                  <span th:text="'Fecha: ' + ${#dates.format(pedido.pago.fechapago, 'dd/MM/yyyy')}"></span>
                </address>
                <span th:if="${pedido.pago == null}">Sin información de pago</span>
              </div>

              <div class="col-sm-4 invoice-col">
                <b>Pedido N°:</b> <span th:text="${pedido.id}"></span> .<br>
                <b>Total:</b> S/. <span th:text="${total}"></span><br>
              </div>
            </div>

            <div class="row mt-4">
              <div class="col-12 table-responsive">
                <table class="table table-striped">
                  <thead>
                  <tr>
                    <th>Cantidad</th>
                    <th>Producto</th>
                    <th>Precio</th>

                    <th>Subtotal</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr th:each="detalle : ${pedido.detalles}">
                    <td th:text="${detalle.cantidad}"></td>
                    <td th:text="${detalle.producto.descripcion}"></td>
                    <td th:text="${detalle.precio}"></td>

                    <td th:text="${detalle.precio}"></td>

                  </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="row mt-3">
              <div class="col-6"></div>
              <div class="col-6">
                <p class="lead">Resumen</p>
                <table class="table">
                  <tr>
                    <th>Total:</th>
                    <td>S/. <span th:text="${total}"></span></td>
                  </tr>
                </table>
              </div>
            </div>

            <div class="row no-print mt-4">
              <div class="col-12">
                <a th:href="@{/store}" class="btn btn-default"><i class="fas fa-arrow-left"></i> Nuevo Pedido</a>
                <button class="btn btn-primary float-right" onclick="window.print();"><i class="fas fa-print"></i> Imprimir</button>
                <form method="post" th:action="@{/store/guardar}">
                  <button type="submit">Confirmar Pedido </button>
                  <a th:href="@{'/store/pedido/pdf/' + ${pedido.id}}" class="btn btn-primary" target="_blank">
                    <i class="fas fa-file-pdf"></i> Ver PDF
                  </a>
                </form>
              </div>
            </div>

          </div> <!-- invoice -->
        </div>
      </div>
    </div>
  </section>
</div>
</html>
